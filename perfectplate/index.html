<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PerfectPlate Content Automation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .tab-container {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #e9ecef;
        }

        .tab-button {
            flex: 1;
            padding: 20px;
            background: none;
            border: none;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #666;
        }

        .tab-button:hover {
            background: #e9ecef;
            color: #333;
        }

        .tab-button.active {
            background: #4CAF50;
            color: white;
        }

        .tab-content {
            display: none;
            padding: 40px;
        }

        .tab-content.active {
            display: block;
        }

        .main-content {
            padding: 0;
        }

        .day-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .day-card {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .day-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            border-color: #4CAF50;
        }

        .day-card.selected {
            border-color: #4CAF50;
            background: #e8f5e8;
        }

        .day-card h3 {
            color: #333;
            font-size: 1.4em;
            margin-bottom: 10px;
        }

        .day-card p {
            color: #666;
            margin-bottom: 15px;
        }

        .day-card .emoji {
            font-size: 2em;
            margin-bottom: 15px;
            display: block;
        }

        .content-generator {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin-top: 30px;
            display: none;
        }

        .blog-creator {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .blog-form {
            display: grid;
            gap: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #4CAF50;
        }

        .form-group textarea {
            min-height: 120px;
            resize: vertical;
        }

        .blog-actions {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .blog-preview {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 30px;
            margin-top: 30px;
            display: none;
            max-width: 100%;
            overflow-wrap: break-word;
        }

        .blog-preview h2 {
            color: #333;
            margin-bottom: 20px;
        }

        .blog-preview .meta {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #e9ecef;
        }

        .blog-preview .content {
            line-height: 1.6;
            color: #444;
            max-width: 100%;
            overflow-x: auto;
        }

        .blog-preview .content img {
            max-width: 100%;
            height: auto;
        }

        .blog-preview .content * {
            max-width: 100%;
        }

        .publish-section {
            background: #e8f5e8;
            border: 2px solid #4CAF50;
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
            display: none;
        }

        .publish-section h3 {
            color: #2e7d32;
            margin-bottom: 15px;
        }

        .template-section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            border: 2px solid #e9ecef;
        }

        .template-section h3 {
            color: #333;
            margin-bottom: 10px;
        }

        .template-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .template-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .template-card:hover {
            border-color: #4CAF50;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .template-card.selected {
            border-color: #4CAF50;
            background: #e8f5e8;
        }

        .template-card h4 {
            color: #333;
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        .template-card p {
            color: #666;
            margin-bottom: 10px;
            font-size: 0.9em;
        }

        .template-card small {
            color: #888;
            font-size: 0.8em;
        }

        .content-generator.active {
            display: block;
        }

        .step-section {
            background: white;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 25px;
            border-left: 5px solid #4CAF50;
        }

        .step-section h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .input-group input, .input-group select, .input-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .input-group input:focus, .input-group select:focus, .input-group textarea:focus {
            outline: none;
            border-color: #4CAF50;
        }

        .btn {
            background: #4CAF50;
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.3s ease;
            margin-right: 10px;
        }

        .btn:hover {
            background: #45a049;
        }

        .btn-secondary {
            background: #6c757d;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .generated-content {
            background: #e8f5e8;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            border: 2px solid #4CAF50;
        }

        .platform-tabs {
            display: flex;
            margin-bottom: 20px;
        }

        .platform-tab {
            background: #e9ecef;
            border: none;
            padding: 12px 20px;
            cursor: pointer;
            border-radius: 8px 8px 0 0;
            margin-right: 5px;
            transition: background 0.3s ease;
        }

        .platform-tab.active {
            background: #4CAF50;
            color: white;
        }

        .platform-content {
            display: none;
            background: white;
            border-radius: 0 10px 10px 10px;
            padding: 20px;
            border: 2px solid #4CAF50;
        }

        .platform-content.active {
            display: block;
        }

        .instructions {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .instructions h4 {
            color: #856404;
            margin-bottom: 10px;
        }

        .instructions ol {
            margin-left: 20px;
        }

        .instructions li {
            margin-bottom: 8px;
            color: #856404;
        }

        .copy-btn {
            background: #17a2b8;
            color: white;
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            margin-top: 10px;
        }

        .copy-btn:hover {
            background: #138496;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .loading.active {
            display: block;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #4CAF50;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            display: none;
        }

        .success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            display: none;
        }

        .zip-codes {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }

        .zip-code {
            background: #e9ecef;
            padding: 8px 12px;
            border-radius: 5px;
            text-align: center;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .zip-code:hover {
            background: #4CAF50;
            color: white;
        }

        .restaurant-suggestions {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }

        .restaurant-suggestions h4 {
            margin-bottom: 10px;
            color: #333;
        }

        .restaurant-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
        }

        .restaurant-item {
            background: white;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #dee2e6;
            cursor: pointer;
            transition: border-color 0.3s ease;
        }

        .restaurant-item:hover {
            border-color: #4CAF50;
        }

        .ad-targeting-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .targeting-category {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            border: 1px solid #dee2e6;
        }

        .targeting-category h5 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.1em;
            border-bottom: 2px solid #4CAF50;
            padding-bottom: 5px;
        }

        .targeting-option {
            background: white;
            padding: 10px 15px;
            margin-bottom: 10px;
            border-radius: 5px;
            border: 1px solid #e9ecef;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .targeting-option:hover {
            background: #e8f5e8;
            border-color: #4CAF50;
        }

        .targeting-option strong {
            color: #333;
        }

        .targeting-option small {
            color: #666;
            display: block;
            margin-top: 5px;
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            overflow-y: auto;
        }

        .diet-option:hover {
            border-color: #4CAF50;
            background: #e8f5e8;
            transform: translateY(-2px);
        }

        .diet-option.selected {
            border-color: #4CAF50;
            background: #e8f5e8;
        }
        
        /* Recipe Diet Card Styles */
        .recipe-diet-card:hover {
            background: #e8f5e8 !important;
            border-color: #4CAF50 !important;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(76, 175, 80, 0.2);
        }
        
        .recipe-diet-card.selected {
            background: #e8f5e8 !important;
            border-color: #4CAF50 !important;
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üçΩÔ∏è PerfectPlate Content Automation</h1>
            <p>Generate engaging social media content with AI-powered variations</p>
        </div>

        <div class="tab-container">
            <button class="tab-button active" onclick="showTab('social-media')">üì± Social Media</button>
            <button class="tab-button" onclick="showTab('blog-creator')">üìù Blog Creator</button>
        </div>

        <div class="main-content">
            <div id="social-media" class="tab-content active">
                <div class="day-selector">
                <div class="day-card" data-day="monday">
                    <span class="emoji">üå±</span>
                    <h3>Meatless Monday</h3>
                    <p>Discover vegan options at restaurants</p>
                    <small>Focus: Plant-based discoveries</small>
                </div>

                <div class="day-card" data-day="tuesday">
                    <span class="emoji">‚ú®</span>
                    <h3>Transformation Tuesday</h3>
                    <p>Surprising diet finds at unexpected places</p>
                    <small>Focus: Unexpected discoveries</small>
                </div>

                <div class="day-card" data-day="keto-tuesday">
                    <span class="emoji">ü•ì</span>
                    <h3>Keto Tuesday</h3>
                    <p>Low-carb options at your favorite spots</p>
                    <small>Focus: Ketogenic discoveries</small>
                </div>

                <div class="day-card" data-day="wednesday">
                    <span class="emoji">üÜï</span>
                    <h3>What's New Wednesday</h3>
                    <p>New restaurants added to database</p>
                    <small>Focus: Recent additions</small>
                </div>

                <div class="day-card" data-day="diabetic-friendly-wednesday">
                    <span class="emoji">ü©∫</span>
                    <h3>Diabetic-Friendly Wednesday</h3>
                    <p>Blood sugar-friendly dining options</p>
                    <small>Focus: Diabetic-friendly meals</small>
                </div>

                <div class="day-card" data-day="thursday">
                    <span class="emoji">üîÑ</span>
                    <h3>Throwback Thursday</h3>
                    <p>Revisit popular restaurant discoveries</p>
                    <small>Focus: Popular past finds</small>
                </div>

                <div class="day-card" data-day="paleo-thursday">
                    <span class="emoji">ü¶ï</span>
                    <h3>Paleo Thursday</h3>
                    <p>Stone-age approved dining options</p>
                    <small>Focus: Ancestral eating discoveries</small>
                </div>

                <div class="day-card" data-day="friday">
                    <span class="emoji">‚ö°</span>
                    <h3>Feature Friday</h3>
                    <p>Showcase app features and user stories</p>
                    <small>Focus: App functionality</small>
                </div>

                <div class="day-card" data-day="gluten-free-friday">
                    <span class="emoji">üåæ</span>
                    <h3>Gluten-Free Friday</h3>
                    <p>Celiac-safe options to end the week</p>
                    <small>Focus: Gluten-free celebrations</small>
                </div>

                <div class="day-card" data-day="saturday">
                    <span class="emoji">üéâ</span>
                    <h3>Success Saturday</h3>
                    <p>User testimonials and success stories</p>
                    <small>Focus: User experiences</small>
                </div>

                <div class="day-card" data-day="sunday">
                    <span class="emoji">üìÖ</span>
                    <h3>Sunday Prep</h3>
                    <p>Weekly dining preparation tips</p>
                    <small>Focus: Planning ahead</small>
                </div>
            </div>

            <div class="content-generator" id="contentGenerator">
                <div class="step-section">
                    <h3>üìç Step 1: Choose Your Search Parameters</h3>
                    
                    <div class="input-group">
                        <label>Diet Focus:</label>
                        <select id="dietType">
                            <option value="vegan">Vegan</option>
                            <option value="vegetarian">Vegetarian</option>
                            <option value="keto">Keto</option>
                            <option value="gluten-free">Gluten-Free</option>
                            <option value="paleo">Paleo</option>
                            <option value="dairy-free">Dairy-Free</option>
                            <option value="low-carb">Low-Carb</option>
                            <option value="pescatarian">Pescatarian</option>
                            <option value="nut-free">Nut-Free</option>
                            <option value="kosher">Kosher</option>
                            <option value="halal">Halal</option>
                            <option value="diabetic-friendly">Diabetic-Friendly</option>
                            <option value="heart-healthy">Heart-Healthy</option>
                            <option value="whole30">Whole30</option>
                            <option value="high-protein">High-Protein</option>
                            <option value="low-sodium">Low-Sodium</option>
                            <option value="mediterranean">Mediterranean</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label>Search Location (ZIP Code):</label>
                        <input type="text" id="zipCode" placeholder="Enter ZIP code or click suggestion">
                        <div class="zip-codes">
                            <div class="zip-code" onclick="selectZip('90210')">90210</div>
                            <div class="zip-code" onclick="selectZip('10001')">10001</div>
                            <div class="zip-code" onclick="selectZip('60601')">60601</div>
                            <div class="zip-code" onclick="selectZip('30301')">30301</div>
                            <div class="zip-code" onclick="selectZip('94102')">94102</div>
                            <div class="zip-code" onclick="selectZip('33101')">33101</div>
                        </div>
                    </div>

                    <div class="restaurant-suggestions">
                        <h4>üí° Suggested Restaurants to Check:</h4>
                        <div class="restaurant-list" id="restaurantSuggestions">
                            <!-- Will be populated based on day selection -->
                        </div>
                    </div>
                </div>

                <div class="step-section">
                    <h3>üì± Step 2: App Instructions</h3>
                    <div class="instructions">
                        <h4>Follow these steps in the PerfectPlate app:</h4>
                        <ol id="appInstructions">
                            <!-- Will be populated based on selections -->
                        </ol>
                    </div>
                </div>

                <div class="step-section">
                    <h3>‚úçÔ∏è Step 3: Content Details</h3>
                    
                    <div class="input-group">
                        <label>Restaurant Name:</label>
                        <input type="text" id="restaurantName" placeholder="e.g., Olive Garden">
                    </div>

                    <div class="input-group">
                        <label>Number of Options Found:</label>
                        <input type="number" id="optionsCount" placeholder="e.g., 12">
                    </div>

                    <div class="input-group">
                        <label>Surprising Detail (Optional):</label>
                        <input type="text" id="surprisingDetail" placeholder="e.g., breadsticks are vegan too!">
                    </div>

                    <div class="input-group">
                        <label>üî• Content Style & Creativity Level:</label>
                        <select id="creativityLevel">
                            <option value="professional">üìä Professional (Corporate-friendly)</option>
                            <option value="engaging" selected>‚ú® Engaging (Moderately Creative)</option>
                            <option value="bold">üöÄ Bold (Attention-Grabbing)</option>
                            <option value="viral">üî• VIRAL (Stop-the-Scroll, High-Risk)</option>
                        </select>
                        <small style="color: #666; font-size: 12px; margin-top: 5px; display: block;">
                            Higher levels = More likely to go viral, but may be riskier for brand safety
                        </small>
                    </div>

                    <div class="input-group">
                        <label>Gemini API Key (for text variation):</label>
                        <input type="password" id="geminiApiKey" placeholder="Enter your Gemini API key">
                        <small style="color: #666; font-size: 12px;">Your API key is stored locally and never sent to our servers</small>
                        <button class="btn btn-secondary" onclick="testApiKey()" style="margin-top: 10px;">üîç Test API Key</button>
                    </div>

                    <div class="input-group">
                        <label>Replicate API Key (for image generation):</label>
                        <input type="password" id="replicateApiKey" placeholder="Enter your Replicate API key">
                        <button type="button" onclick="testReplicateApiKey()" style="margin-left: 10px; padding: 5px 10px; font-size: 12px;">Test API Key</button>
                        <small style="color: #666; font-size: 12px;">Used to generate actual images from your screenshots ($0.003 per image)</small>
                    </div>

                    <div class="input-group">
                        <label>üìã Content Type Selection:</label>
                        <div style="display: flex; gap: 20px; margin-top: 10px;">
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                <input type="checkbox" id="generateSocialMedia" checked>
                                <span>üì± Social Media Posts</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                <input type="checkbox" id="generateAds">
                                <span>üéØ Ad Targeting & Content</span>
                            </label>
                        </div>
                        <small style="color: #666; font-size: 12px;">Choose what to generate to save API tokens</small>
                    </div>

                    <button class="btn" onclick="generateContent()">üöÄ Generate Content</button>
                    <button class="btn btn-secondary" onclick="resetForm()">üîÑ Reset</button>
                    <button class="btn btn-secondary" onclick="resetAllStuckButtons()" style="background: #dc3545;">üîß Reset Stuck Buttons</button>
                </div>

                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <p>Generating AI-powered content variations...</p>
                </div>

                <div class="error" id="error"></div>
                <div class="success" id="success"></div>

                <div class="generated-content" id="generatedContent" style="display: none;">
                    <h3>üìù Generated Content</h3>
                    
                    <div class="platform-tabs">
                        <button class="platform-tab active" onclick="showPlatform('tiktok')">TikTok</button>
                        <button class="platform-tab" onclick="showPlatform('facebook')">Facebook</button>
                        <button class="platform-tab" onclick="showPlatform('ads')">üéØ Ad Targeting</button>
                    </div>

                    <div class="platform-content active" id="tiktok-content">
                        <h4>üéµ TikTok Post</h4>
                        <div id="tiktok-text"></div>
                        <button class="copy-btn" onclick="copyToClipboard('tiktok-text')">üìã Copy TikTok Text</button>
                        
                        <div class="instructions" style="margin-top: 20px;">
                            <h4>üìπ TikTok Video Instructions:</h4>
                            <ol id="tiktok-instructions"></ol>
                        </div>
                    </div>

                    <div class="platform-content" id="facebook-content">
                        <h4>üìò Facebook Post</h4>
                        <div id="facebook-text"></div>
                        <button class="copy-btn" onclick="copyToClipboard('facebook-text')">üìã Copy Facebook Text</button>
                        
                        <div class="instructions" style="margin-top: 20px;">
                            <h4>üì∏ Facebook Post Instructions:</h4>
                            <ol id="facebook-instructions"></ol>
                        </div>
                    </div>

                    <div class="platform-content" id="ads-content">
                        <h4>üéØ Ad Targeting Strategy</h4>
                        <div id="ad-targeting-suggestions"></div>
                        
                        <h4 style="margin-top: 30px;">üìù Ready-to-Use Ad Content</h4>
                        <div id="ad-content-suggestions"></div>
                        
                        <h4 style="margin-top: 30px;">üì∏ Visual Content Recommendations</h4>
                        <div id="visual-content-suggestions"></div>
                        
                        <div class="instructions" style="margin-top: 20px;">
                            <h4>üéØ Targeting Setup Instructions:</h4>
                            <ol>
                                <li>Open Facebook Ads Manager or TikTok Ads Manager</li>
                                <li>Create a new campaign with "Traffic" or "Conversions" objective</li>
                                <li>Set your daily budget between $10-50 for testing</li>
                                <li>Use the targeting suggestions above for your audience</li>
                                <li>Select the specific locations based on your restaurant focus</li>
                                <li>Set age ranges and interests as recommended</li>
                                <li>Copy the ad content from the sections above</li>
                                <li>Create 3-5 ad variations with different images/text</li>
                                <li>Monitor performance after 3 days and optimize top performers</li>
                            </ol>
                        </div>
                    </div>
                </div>

                <!-- Performance Analysis Section -->
                <div class="step-section" style="margin-top: 40px; border-top: 2px solid #4CAF50; padding-top: 30px;">
                    <h3>üìä AI Performance Optimizer</h3>
                    <p style="color: #666; margin-bottom: 20px;">Tell me about your current campaign performance and I'll provide AI-powered optimization suggestions.</p>
                    
                    <div class="performance-inputs" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 20px;">
                        <div class="input-group">
                            <label>Current CPC (Cost Per Click):</label>
                            <input type="number" id="currentCPC" placeholder="e.g., 1.14" step="0.01">
                            <small style="color: #666;">Your current cost per click in dollars</small>
                        </div>

                        <div class="input-group">
                            <label>Click-Through Rate (CTR):</label>
                            <input type="number" id="currentCTR" placeholder="e.g., 2.5" step="0.1">
                            <small style="color: #666;">Your current CTR percentage</small>
                        </div>

                        <div class="input-group">
                            <label>Daily Budget:</label>
                            <input type="number" id="dailyBudget" placeholder="e.g., 50" step="1">
                            <small style="color: #666;">Your current daily ad spend</small>
                        </div>

                        <div class="input-group">
                            <label>Campaign Objective:</label>
                            <select id="campaignObjective">
                                <option value="app_installs">App Installs</option>
                                <option value="website_traffic">Website Traffic</option>
                                <option value="conversions">Conversions</option>
                                <option value="brand_awareness">Brand Awareness</option>
                                <option value="engagement">Engagement</option>
                            </select>
                        </div>
                    </div>

                    <div class="performance-inputs" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 20px;">
                        <div class="input-group">
                            <label>Target Audience:</label>
                            <textarea id="targetAudience" placeholder="e.g., Health-conscious millennials, ages 25-40, interested in fitness and nutrition" rows="3"></textarea>
                        </div>

                        <div class="input-group">
                            <label>Current Ad Creative Type:</label>
                            <select id="creativeType">
                                <option value="static_image">Static Image</option>
                                <option value="video">Video</option>
                                <option value="carousel">Carousel</option>
                                <option value="collection">Collection</option>
                            </select>
                        </div>

                        <div class="input-group">
                            <label>Geographic Targeting:</label>
                            <input type="text" id="geoTargeting" placeholder="e.g., Los Angeles, CA - 25 mile radius">
                        </div>

                        <div class="input-group">
                            <label>Campaign Duration:</label>
                            <select id="campaignDuration">
                                <option value="1-3_days">1-3 Days</option>
                                <option value="1_week">1 Week</option>
                                <option value="2_weeks">2 Weeks</option>
                                <option value="1_month">1 Month</option>
                                <option value="ongoing">Ongoing</option>
                            </select>
                        </div>
                    </div>

                    <div class="input-group" style="margin-bottom: 20px;">
                        <label>Current Ad Content/Copy:</label>
                        <textarea id="currentAdContent" placeholder="Paste your current ad headline, description, and call-to-action here..." rows="4"></textarea>
                    </div>

                    <div class="input-group" style="margin-bottom: 20px;">
                        <label>Main Challenge/Goal:</label>
                        <select id="mainChallenge">
                            <option value="reduce_cpc">Reduce CPC</option>
                            <option value="increase_ctr">Increase Click-Through Rate</option>
                            <option value="improve_conversions">Improve Conversions</option>
                            <option value="expand_reach">Expand Reach</option>
                            <option value="better_targeting">Better Audience Targeting</option>
                            <option value="creative_fatigue">Combat Creative Fatigue</option>
                        </select>
                    </div>

                    <button class="btn" onclick="analyzePerformance()" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                        ü§ñ Analyze & Get AI Suggestions
                    </button>
                </div>

                <div class="performance-results" id="performanceResults" style="display: none; margin-top: 30px;">
                    <h3>üéØ AI Performance Analysis & Recommendations</h3>
                    <div id="performanceAnalysis"></div>
                    <div id="optimizationSuggestions"></div>
                    <div id="optimizedContent"></div>
                </div>
            </div>
            </div>

            <div id="blog-creator" class="tab-content">
                <div class="blog-creator">
                    <h2>üìù Blog Post Creator</h2>
                    <p>Create SEO and AIO optimized blog posts for your website</p>
                    
                    <!-- Quick Start Templates -->
                    <div class="template-section">
                        <h3>üöÄ Quick Start Templates</h3>
                        <p>Choose a category to generate unique, fresh content every time:</p>
                        <div class="template-grid">
                            <div class="template-card" onclick="selectTemplate('keto-guide')">
                                <h4>ü•ë Keto Dining Guide</h4>
                                <p>Complete guide to finding keto meals at restaurants</p>
                                <small>Dynamic titles, keywords, and outlines every time</small>
                            </div>
                            <div class="template-card" onclick="selectTemplate('vegan-options')">
                                <h4>üå± Vegan Restaurant Options</h4>
                                <p>Discovering plant-based meals at popular chains</p>
                                <small>Fresh content with every generation</small>
                            </div>
                            <div class="template-card" onclick="selectTemplate('food-allergies')">
                                <h4>üö´ Food Allergy Safety</h4>
                                <p>How to dine safely with food allergies</p>
                                <small>Unique angles and approaches each time</small>
                            </div>
                            <div class="template-card" onclick="selectTemplate('gluten-free')">
                                <h4>üåæ Gluten-Free Dining</h4>
                                <p>Celiac-safe restaurant choices and tips</p>
                                <small>Fresh insights on gluten-free options</small>
                            </div>
                            <div class="template-card" onclick="selectTemplate('macro-tracking')">
                                <h4>üí™ Macro Tracking Guide</h4>
                                <p>Finding high-protein, macro-friendly meals</p>
                                <small>New perspectives on fitness dining</small>
                            </div>
                            <div class="template-card" onclick="selectTemplate('diabetic-friendly')">
                                <h4>ü©∫ Diabetic-Friendly Dining</h4>
                                <p>Restaurant options for diabetic meal planning</p>
                                <small>Fresh takes on healthy dining</small>
                            </div>
                            <div class="template-card" onclick="selectTemplate('paleo-guide')">
                                <h4>ü•© Paleo Dining Guide</h4>
                                <p>Complete guide to finding paleo meals at restaurants</p>
                                <small>Dynamic titles, keywords, and outlines every time</small>
                            </div>
                            <div class="template-card" onclick="selectTemplate('app-features')">
                                <h4>üì± App Feature Spotlight</h4>
                                <p>How PerfectPlate features solve real problems</p>
                                <small>Different feature angles every time</small>
                            </div>
                            <div class="template-card" onclick="selectTemplate('recipes')">
                                <h4>üë®‚Äçüç≥ Recipe Generator</h4>
                                <p>Generate diet-specific recipes with images</p>
                                <small>Creates formatted recipes based on selected diet</small>
                            </div>
                        </div>
                    </div>

                    <!-- Recipe Diet Templates (only shown for recipe generation) -->
                    <div class="recipe-diet-section" id="recipeDietSection" style="display: none;">
                        <h4>üçΩÔ∏è Select Diet Type for Recipe</h4>
                        <p>Choose a diet type to generate recipe ideas:</p>
                        
                        <div class="recipe-diet-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin: 20px 0;">
                            <div class="recipe-diet-card" onclick="selectRecipeDiet('keto')" style="background: #f8f9fa; border: 2px solid #e9ecef; border-radius: 10px; padding: 15px; text-align: center; cursor: pointer; transition: all 0.3s ease;">
                                <div style="font-size: 2em; margin-bottom: 5px;">ü•ë</div>
                                <h5 style="color: #333; margin: 5px 0;">Keto</h5>
                                <small style="color: #666;">Low-carb, high-fat</small>
                            </div>
                            <div class="recipe-diet-card" onclick="selectRecipeDiet('vegan')" style="background: #f8f9fa; border: 2px solid #e9ecef; border-radius: 10px; padding: 15px; text-align: center; cursor: pointer; transition: all 0.3s ease;">
                                <div style="font-size: 2em; margin-bottom: 5px;">üå±</div>
                                <h5 style="color: #333; margin: 5px 0;">Vegan</h5>
                                <small style="color: #666;">Plant-based only</small>
                            </div>
                            <div class="recipe-diet-card" onclick="selectRecipeDiet('vegetarian')" style="background: #f8f9fa; border: 2px solid #e9ecef; border-radius: 10px; padding: 15px; text-align: center; cursor: pointer; transition: all 0.3s ease;">
                                <div style="font-size: 2em; margin-bottom: 5px;">ü•¨</div>
                                <h5 style="color: #333; margin: 5px 0;">Vegetarian</h5>
                                <small style="color: #666;">No meat</small>
                            </div>
                            <div class="recipe-diet-card" onclick="selectRecipeDiet('gluten-free')" style="background: #f8f9fa; border: 2px solid #e9ecef; border-radius: 10px; padding: 15px; text-align: center; cursor: pointer; transition: all 0.3s ease;">
                                <div style="font-size: 2em; margin-bottom: 5px;">üåæ</div>
                                <h5 style="color: #333; margin: 5px 0;">Gluten-Free</h5>
                                <small style="color: #666;">No gluten</small>
                            </div>
                            <div class="recipe-diet-card" onclick="selectRecipeDiet('paleo')" style="background: #f8f9fa; border: 2px solid #e9ecef; border-radius: 10px; padding: 15px; text-align: center; cursor: pointer; transition: all 0.3s ease;">
                                <div style="font-size: 2em; margin-bottom: 5px;">ü•©</div>
                                <h5 style="color: #333; margin: 5px 0;">Paleo</h5>
                                <small style="color: #666;">Whole foods only</small>
                            </div>
                            <div class="recipe-diet-card" onclick="selectRecipeDiet('diabetic-friendly')" style="background: #f8f9fa; border: 2px solid #e9ecef; border-radius: 10px; padding: 15px; text-align: center; cursor: pointer; transition: all 0.3s ease;">
                                <div style="font-size: 2em; margin-bottom: 5px;">üè•</div>
                                <h5 style="color: #333; margin: 5px 0;">Diabetic-Friendly</h5>
                                <small style="color: #666;">Blood sugar conscious</small>
                            </div>
                        </div>
                    </div>

                    <!-- AI Rogue Mode Toggle -->
                    <div class="ai-rogue-section" style="margin: 20px 0; padding: 20px; background: linear-gradient(135deg, #ff6b6b, #4ecdc4); border-radius: 15px; border: 3px solid #2d3436;">
                        <div style="text-align: center; color: white; margin-bottom: 15px;">
                            <h4 style="margin: 0; font-size: 1.3em;">ü§ñ AI GOES ROGUE MODE</h4>
                            <p style="margin: 5px 0 0 0; opacity: 0.9; font-size: 0.95em;">Generate hilariously broken AI cooking videos that mock AI video generation</p>
                        </div>
                        <div style="display: flex; justify-content: center; align-items: center; gap: 15px;">
                            <label style="color: white; font-weight: bold; display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                <input type="checkbox" id="aiRogueMode" style="transform: scale(1.5);">
                                <span>üé≠ Enable AI Chaos Mode</span>
                            </label>
                        </div>
                        <div style="margin-top: 12px; padding: 10px; background: rgba(0,0,0,0.3); border-radius: 8px; text-align: center;">
                            <small style="color: #f8f9fa; line-height: 1.4;">
                                üé¨ Creates parody videos where AI dramatically fails at understanding cooking<br>
                                üí° Perfect for viral TikTok content that makes fun of AI limitations
                            </small>
                        </div>
                    </div>
                        
                    <div class="template-actions">
                        <button class="btn" onclick="regenerateCurrentTemplate()" style="background: #17a2b8; margin-top: 20px;">
                            üîÑ Generate New Ideas for Selected Category
                        </button>
                        <button class="btn" onclick="toggleSavedRecipes()" style="background: #28a745; margin-top: 20px; margin-left: 10px;">
                            üìö View Saved Recipes
                        </button>
                    </div>

                    <!-- Saved Recipes Section -->
                    <div id="savedRecipesSection" style="display: none; margin-top: 30px; background: #f8f9fa; padding: 20px; border-radius: 10px; border: 1px solid #dee2e6;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h3 style="color: #333; margin: 0;">üìö Saved Recipes with TikTok Content</h3>
                            <button onclick="toggleSavedRecipes()" style="background: #6c757d; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">
                                ‚úï Close
                            </button>
                        </div>
                        <div id="savedRecipesContainer">
                            <!-- Saved recipes will be populated here -->
                        </div>
                    </div>

                    <!-- Custom Form -->
                    <div class="blog-form">
                        <div class="form-group">
                            <label for="blogTitle">Blog Post Title:</label>
                            <input type="text" id="blogTitle" placeholder="Will be auto-filled when you select a template">
                        </div>

                        <div class="form-group">
                            <label for="blogCategory">Category:</label>
                            <select id="blogCategory">
                                <option value="Getting Started">Getting Started</option>
                                <option value="Meal Planning">Meal Planning</option>
                                <option value="Dietary Tips">Dietary Tips</option>
                                <option value="Restaurant Guides">Restaurant Guides</option>
                                <option value="App Features">App Features</option>
                                <option value="Nutrition">Nutrition</option>
                                <option value="Recipes">Recipes</option>
                                <option value="Tips & Tricks">Tips & Tricks</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="blogKeywords">Target Keywords (comma-separated):</label>
                            <input type="text" id="blogKeywords" placeholder="Will be auto-filled when you select a template">
                        </div>

                        <div class="form-group">
                            <label for="blogTone">Writing Tone:</label>
                            <select id="blogTone">
                                <option value="friendly">Friendly & Conversational</option>
                                <option value="informative">Informative & Educational</option>
                                <option value="professional">Professional & Authoritative</option>
                                <option value="personal">Personal & Story-driven</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="blogLength">Article Length:</label>
                            <select id="blogLength">
                                <option value="medium">Medium (800-1200 words)</option>
                                <option value="short">Short (500-800 words)</option>
                                <option value="long">Long (1200-2000 words)</option>
                            </select>
                        </div>



                        <div class="form-group">
                            <label for="blogOutline">Key Points to Cover (auto-filled, but you can edit):</label>
                            <textarea id="blogOutline" placeholder="Will be auto-filled when you select a template"></textarea>
                        </div>

                        <div class="blog-actions">
                            <button class="btn" onclick="generateBlogPost()">ü§ñ Generate Blog Post</button>
                        </div>
                    </div>

                    <div class="blog-preview" id="blogPreview">
                        <h2 id="previewTitle"></h2>
                        <div class="meta" id="previewMeta"></div>
                        <div class="content" id="previewContent"></div>
                    </div>

                    <div class="publish-section" id="publishSection">
                        <h3>üöÄ Publish to Website</h3>
                        <p>Your blog post is ready! Click below to publish it to your PerfectPlate website.</p>
                        <div class="blog-actions">
                            <button class="btn" onclick="publishBlogPost()">üì§ Publish to Website</button>
                            <button class="btn" id="tiktokGenerateBtn" onclick="generateTikTokForCurrentRecipe()" style="background: #fe2c55; margin-left: 10px;">
                                üé¨ Generate TikTok Content
                            </button>
                            <div id="tiktokModeStatus" style="margin-top: 8px; font-size: 0.9em; text-align: center;">
                                <!-- Status will be updated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <!-- Test if JavaScript is working -->
    <script>
        // Basic JavaScript functionality check
        if (typeof console !== 'undefined') {
            // JavaScript is working
        }
    </script>

    <!-- Load fallback functions first -->
    <script src="js/fallback.js"></script>
    
    <!-- Load all modular scripts in proper order -->
    <script src="js/utils.js"></script>
    <script src="js/social-media.js"></script>
    <script src="js/blog-generator.js"></script>
    <script src="js/recipe-generator.js"></script>
<script src="js/ai-rogue-generator.js"></script>
<script src="js/main.js"></script>

    <!-- API Key Persistence -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const geminiApiKeyInput = document.getElementById('geminiApiKey');
            const replicateApiKeyInput = document.getElementById('replicateApiKey');
            
            // Load saved API keys
            const savedGeminiApiKey = localStorage.getItem('geminiApiKey');
            const savedReplicateApiKey = localStorage.getItem('replicateApiKey');
            
            if (savedGeminiApiKey && geminiApiKeyInput) {
                geminiApiKeyInput.value = savedGeminiApiKey;
            }
            
            if (savedReplicateApiKey && replicateApiKeyInput) {
                replicateApiKeyInput.value = savedReplicateApiKey;
            }
            
            // Save API keys when changed
            if (geminiApiKeyInput) {
                geminiApiKeyInput.addEventListener('change', function() {
                    localStorage.setItem('geminiApiKey', this.value);
                });
            }
            
            if (replicateApiKeyInput) {
                replicateApiKeyInput.addEventListener('change', function() {
                    localStorage.setItem('replicateApiKey', this.value);
                });
            }
        });

        // Test Replicate API Key function
        async function testReplicateApiKey() {
            const apiKey = document.getElementById('replicateApiKey').value;
            if (!apiKey) {
                alert('Please enter a Replicate API key first');
                return;
            }

            try {
                console.log('üß™ Testing Replicate API key...');
                console.log('üîë API Key (first 10 chars):', apiKey.substring(0, 10) + '...');
                
                // First try a simple GET request to check authentication
                console.log('üì° Testing authentication with GET /v1/predictions...');
                const authTest = await fetch('https://api.replicate.com/v1/predictions?page_size=1', {
                    method: 'GET',
                    headers: {
                        'Authorization': `Token ${apiKey}`
                    }
                });

                console.log('üìä Auth test response status:', authTest.status);
                
                if (!authTest.ok) {
                    const authErrorText = await authTest.text();
                    console.error('‚ùå Authentication failed:', authErrorText);
                    alert(`‚ùå API key authentication failed: ${authTest.status}\n\nError: ${authErrorText}\n\nPlease check:\n1. API key is correct\n2. API key has proper permissions\n3. Account is active`);
                    return;
                }

                console.log('‚úÖ Authentication successful! Now testing prediction creation...');
                
                const response = await fetch('https://api.replicate.com/v1/predictions', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Token ${apiKey}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        version: "131d9e185621b4b4d349fd262e363420a6f74081d8c27966c9c5bcf120fa3985",
                        input: {
                            prompt: "test image of a red apple",
                            num_outputs: 1,
                            aspect_ratio: "1:1"
                        }
                    })
                });

                console.log('üìä Prediction creation response status:', response.status);

                if (response.ok) {
                    const result = await response.json();
                    console.log('‚úÖ Replicate API key is working perfectly!', result);
                    alert('‚úÖ Replicate API key is working!\n\nPrediction ID: ' + result.id + '\nStatus: ' + result.status + '\n\nYour API key is ready for image generation!');
                } else {
                    const errorText = await response.text();
                    console.error('‚ùå Prediction creation failed:', errorText);
                    alert(`‚ùå Prediction creation failed: ${response.status}\n\nError: ${errorText}\n\nThe API key works for authentication but failed to create a prediction.`);
                }
            } catch (error) {
                console.error('‚ùå Test error:', error);
                if (error.message.includes('Failed to fetch') || error.message.includes('CORS') || error.message.includes('network')) {
                    alert(`‚ùå Network/CORS Error: ${error.message}

This is likely a browser security restriction. Here are solutions:

üîß IMMEDIATE FIXES:
1. Try a different browser (Chrome, Firefox, Edge)
2. Use incognito/private mode
3. Disable browser extensions temporarily

üîß IF STILL FAILING:
The API key might still work for actual image generation even if the test fails.
Try generating a recipe with images to see if it works.

üîß TECHNICAL SOLUTION:
This happens because browsers block direct API calls from localhost.
The actual image generation might work because it's called differently.`);
                } else {
                    alert('‚ùå Test failed: ' + error.message + '\n\nCheck browser console (F12) for more details.');
                }
            }
        }
    </script>
</body>
</html> 